/*C3*/SET SCHEMA PUBLIC
drop table if exists appointment CASCADE 
drop table if exists appointment_results CASCADE 
drop table if exists doc CASCADE 
drop table if exists doc_patients CASCADE 
drop table if exists patient CASCADE 
drop sequence hibernate_sequence if exists
create sequence hibernate_sequence start with 1 increment by 1
create table appointment (id bigint not null, attended boolean, doc_id bigint, patient_id bigint, scheduled_date timestamp, primary key (id))
create table appointment_results (doc_notes varchar(255), appointment_id bigint not null, primary key (appointment_id))
create table doc (id bigint generated by default as identity (start with 1), firstname varchar(255), lastname varchar(255), specialty varchar(255), title integer, primary key (id))
create table doc_patients (doc_id bigint not null, patient_id bigint not null, primary key (doc_id, patient_id))
create table patient (id bigint generated by default as identity (start with 1), dob timestamp, email varchar(255), firstname varchar(255), lastname varchar(255), phone varchar(255), primary key (id))
alter table appointment_results add constraint FK5ewiaj9rvwigu8h41hd87wg6a foreign key (appointment_id) references appointment
alter table doc_patients add constraint FKpcogs2x4qn468paiqrwmm3qao foreign key (patient_id) references patient
alter table doc_patients add constraint FKp524rdpcn1totyj8mirfylsqc foreign key (doc_id) references doc
INSERT INTO DOC VALUES(1,'chiro','two','functional movement',2)
COMMIT
INSERT INTO DOC VALUES(2,'physio','three','sports physiotherapy',1)
COMMIT
INSERT INTO PATIENT VALUES(1,'2021-01-27 15:53:04.355000','p1@email.com','patient','one','213-456-7890')
INSERT INTO DOC VALUES(3,'no','doc','general physician',0)
INSERT INTO DOC_PATIENTS VALUES(3,1)
COMMIT
INSERT INTO PATIENT VALUES(2,'2021-01-27 15:53:04.355000','p2@email.com','patient','two','321-456-7890')
COMMIT
INSERT INTO PATIENT VALUES(3,'2021-01-27 15:53:04.385000','p3@email.com','patient','three','213-456-7890')
COMMIT
INSERT INTO DOC_PATIENTS VALUES(1,3)
COMMIT
INSERT INTO DOC_PATIENTS VALUES(2,1)
COMMIT
