/*C3*/SET SCHEMA PUBLIC
drop table if exists appointment CASCADE 
drop table if exists doc CASCADE 
drop table if exists doc_patients CASCADE 
drop table if exists patient CASCADE 
create table appointment (appointment_id bigint generated by default as identity (start with 1), attended integer, doc_id bigint, notes varchar(255), patient_id bigint, scheduled_date timestamp, primary key (appointment_id))
create table doc (id bigint generated by default as identity (start with 1), firstname varchar(255), lastname varchar(255), specialty varchar(255), title integer, primary key (id))
create table doc_patients (doc_id bigint not null, patient_id bigint not null, primary key (doc_id, patient_id))
create table patient (id bigint generated by default as identity (start with 1), dob timestamp, email varchar(255), firstname varchar(255), lastname varchar(255), phone varchar(255), primary key (id))
alter table doc_patients add constraint FKpcogs2x4qn468paiqrwmm3qao foreign key (patient_id) references patient
alter table doc_patients add constraint FKp524rdpcn1totyj8mirfylsqc foreign key (doc_id) references doc
INSERT INTO DOC VALUES(1,'chiro','two','functional movement',2)
COMMIT
INSERT INTO DOC VALUES(2,'physio','three','sports physiotherapy',1)
COMMIT
INSERT INTO PATIENT VALUES(1,'2021-01-27 20:28:12.326000','p1@email.com','patient','one','213-456-7890')
INSERT INTO DOC VALUES(3,'no','doc','general physician',0)
INSERT INTO DOC_PATIENTS VALUES(3,1)
COMMIT
INSERT INTO PATIENT VALUES(2,'2021-01-27 20:28:12.326000','p2@email.com','patient','two','321-456-7890')
COMMIT
INSERT INTO PATIENT VALUES(3,'2021-01-27 20:28:12.357000','p3@email.com','patient','three','213-456-7890')
COMMIT
INSERT INTO DOC_PATIENTS VALUES(1,3)
COMMIT
INSERT INTO APPOINTMENT VALUES(1,0,1,NULL,3,'2021-02-01 00:00:00.000000')
COMMIT
INSERT INTO APPOINTMENT VALUES(2,0,2,NULL,3,'2021-02-01 00:00:00.000000')
COMMIT
INSERT INTO APPOINTMENT VALUES(3,0,1,NULL,3,'2021-02-06 00:00:00.000000')
COMMIT
INSERT INTO APPOINTMENT VALUES(4,0,2,NULL,3,'2021-02-16 00:00:00.000000')
COMMIT
INSERT INTO APPOINTMENT VALUES(5,0,1,NULL,3,'2021-01-17 00:00:00.000000')
COMMIT
DELETE FROM APPOINTMENT WHERE APPOINTMENT_ID=1
INSERT INTO APPOINTMENT VALUES(1,0,1,'patient is fine',3,'2021-02-01 00:00:00.000000')
COMMIT
